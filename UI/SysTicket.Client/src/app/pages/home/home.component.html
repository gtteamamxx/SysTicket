<div class="home-container">
    <div class="content-container">
        <div class="calendar-view-container">
            <div class="header-container">
                <mat-icon mat-list-icon>event</mat-icon>
                <div class="text-container">
                    <span class="title">Kalendarz</span>
                </div>
            </div>

            <div class="buttons-container">
                <button mwlCalendarPreviousView
                        mat-raised-button
                        [view]="CalendarView.Month"
                        [(viewDate)]="currentDate">⟪</button>

                <div class="month"> {{ currentDate | date:'LLLL':undefined:'pl' }} {{ currentDate | date:'YYYY':undefined:'pl' }} </div>

                <button mwlCalendarNextView
                        [view]="CalendarView.Month"
                        mat-raised-button
                        [(viewDate)]="currentDate">⟫</button>
            </div>
            <mwl-calendar-month-view [viewDate]="currentDate"
                                     locale="pl"
                                     [tooltipTemplate]="tooltip"
                                     (eventClicked)="onCalendarEventClick($event)"
                                     [events]="$any(events$ | async)">
                <ng-template #tooltip
                             let-event="event">
                    <div class="tooltip-calendar-container">
                        {{ event.title }}
                        <br />
                        <ng-container>
                            od {{ event.start | date:'HH:mm' }} do {{ event.end | date:'HH:mm' }}
                        </ng-container>
                    </div>
                </ng-template>
            </mwl-calendar-month-view>
        </div>

        <div class="events-container">
            <div class="header-container">
                <mat-icon mat-list-icon>event</mat-icon>
                <div class="text-container">
                    <span class="title">Lista aktualnych wydarzeń</span>
                </div>
            </div>

            <div class="list-container">
                <app-event-preview *ngFor="let event of events$ | async"
                                   class="event"
                                   [title]="event.meta?.title!"
                                   [body]="event.meta?.body!"
                                   [dateFrom]="event.meta?.dateFrom!"
                                   [dateTo]="event.meta?.dateTo!"
                                   [img]="event.meta?.headerImgBase64!"
                                   [place]="event.meta?.place!"
                                   (buyTicket)="onEventBuyTicketClick(event.meta!)">
                </app-event-preview>
            </div>


            <mat-paginator *ngIf="$any((events$ | async)).length > 0"
                           class="events-paginator"
                           [length]="totalEventsCount$ | async"
                           [pageSize]="pageSize$ | async"
                           [pageSizeOptions]="[5, 10, 15, 20]"
                           (page)="onEventsPaginationChange($event)">
            </mat-paginator>
        </div>
    </div>
</div>